<div class="menu-bar">
    <!-- Logo Section -->
    <div class="logo">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo">
    </div>

    <!-- Profile Section -->
    <div class="profile-section">
        <div class="profile-info">
            <span>Welcome, {{ current_user.username }}</span>
            <img src="{{ current_user.profile_picture_url or url_for('static', filename='images/default-profile.png') }}"
                 alt="Profile Picture" class="profile-picture">
        </div>

        <!-- Logout Button -->
        <div class="logout">
            <a href="{{ url_for('auth.logout') }}" class="logout-button">Logout</a>
        </div>
    </div>
</div>

<div class="sidebar">
    <a href="javascript:void(0);" class="icon" id="toggleIcon" onclick="toggleMenu()">&#9776;</a>
    <div id="sidebarMenu" class="sidebar-links">
        <ul>
            <li><a href="{{ url_for('survey.demographic_charts') }}">Demographic Charts</a></li>
            <li><a href="{{ url_for('survey.survey_charts') }}">Survey Charts</a></li>
            <li><a href="{{ url_for('auth.logout') }}">Logout</a></li>
        </ul>
    </div>
</div>

<style>
/* Menu Bar Styles */
.menu-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #4ea375;
    color: white;
    padding: 10px 20px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
}

.logo img {
    height: 50px;
}

.profile-section {
    display: flex;
    align-items: center;
}

.profile-info {
    display: flex;
    align-items: center;
    margin-right: 20px;
}

.profile-info span {
    margin-right: 10px;
    font-size: 16px;
    font-weight: 500;
}

.profile-picture {
    height: 40px;
    width: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid white;
}

.logout {
    margin-left: 10px;
}

.logout-button {
    text-decoration: none;
    background-color: #d9534f;
    color: white;
    padding: 8px 15px;
    border-radius: 5px;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.logout-button:hover {
    background-color: #c9302c;
}

/* Sidebar Styles */
.sidebar {
    margin-top: 60px; /* Push below the menu bar */
    height: calc(100vh - 60px); /* Full height minus menu bar height */
    width: 60px; /* Collapsed width */
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: #4ea375;
    overflow-x: hidden;
    transition: 0.3s;
    padding-top: 20px;
}

.sidebar a {
    padding: 10px 15px;
    text-decoration: none;
    font-size: 18px;
    color: white;
    display: block;
    transition: 0.3s;
}

.sidebar a:hover {
    background-color: #575757;
}

.sidebar .icon {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 30px;
    cursor: pointer;
    color: white;
    transition: 0.3s;
}

.sidebar-links {
    display: none; /* Hide links by default */
    padding-left: 10px;
    overflow: hidden; /* Prevent content overflow */
}

.sidebar.expanded {
    width: 250px; /* Expanded width */
}

.sidebar.expanded .sidebar-links {
    display: block; /* Show links when expanded */
}

/* Remove default list item dots */
.sidebar-links ul {
    list-style-type: none; /* Remove default dots */
    padding: 0; /* Remove default padding */
    margin: 0; /* Remove default margin */
}

body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    padding-top: 60px; /* Ensure content starts below the menu bar */
}
</style>

<script>
function toggleMenu() {
    const sidebar = document.querySelector(".sidebar");
    const links = document.getElementById("sidebarMenu");
    const toggleIcon = document.getElementById("toggleIcon");

    if (sidebar.classList.contains("expanded")) {
        // Collapse the sidebar
        sidebar.classList.remove("expanded");
        sidebar.classList.add("collapsed");
        links.style.display = "none"; // Hide links
        toggleIcon.innerHTML = "&#9776;"; // Set to hamburger icon
    } else {
        // Expand the sidebar
        sidebar.classList.remove("collapsed");
        sidebar.classList.add("expanded");
        links.style.display = "block"; // Show links
        toggleIcon.innerHTML = "&times;"; // Set to close icon
    }
}
</script>
